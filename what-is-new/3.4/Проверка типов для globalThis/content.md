##Проверка типов для globalThis

Поскольку реализация глобальной области зависит от конкретной платформы, доступ к ней, соответственно, отличается. В браузере, доступ к глобальному объекту осуществляется при помощи ссылки `window`, в, то время как в `nodejs` туже роль исполняет ссылка `global`.

Для упрощения работы с глобальным объектом, в _ECMAScript10_ было предложено стандартизировать имя идентификатора ссылающего на него. Так в _ES2019_ появилось новое глобальное свойство `globalThis`, которое предоставляет доступ к глобальному объекту независимо от платформы.

Начиная с версии `v3.4` в _TypeScript_ также было представлено новое свойство `globalThis`, и, кроме того, компилятор `tsc` получил поддержку проверки типов для полей объявленных в глобальном модуле. Помимо того, что объявленные в глобальном контексте члены, получили поддержку вывода типов, благодаря этому механизму, современные _ide_ стали предоставлять разработчикам механизм умного автокомплита из нового глобального модуля.

`````ts
// где-то в глобальном файле
let globalValue = 100;
const GLOBAL_VALUE = '100';

// где-то в приложении
let a = globalValue; // let a: number
let b = GLOBAL_VALUE; // let b: string

globalThis.globalValue = 101; // Ok
globalThis.GLOBAL_VALUE = '101'; // Error
```

Важным моментом является то, что _TypeScript_ не преобразует свойство `globalThis` при компиляции в более старые версии _ECMAScript_.

Помимо этого, введение текущего функционала привело к изменению поведения предыдущих компиляторов. Если до версии `v3.4` допускалось объявлять члены в глобальном объекте с помощью ссылки `this`, то начиная с версии `v3.4`, такой код вызывает ошибку.

`````ts
// до версии 3.4
this.a = 'value'; // Ok
globalThis.b = 'value'; // Error

// начиная с версии 3.4
this.a = 'value'; // Error
globalThis.b = 'value'; // Ok
```
