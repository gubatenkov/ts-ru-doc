## Комментарная директива @ts-expect-error

Поскольку разработка на языке `TypeScript` неразрывно связанна с `JavaScript` в некоторых моментах может возникать разногласия.

Представьте ситуацию при которой необходимо покрыть тестами функцию принимающую на вход строковой параметр и кроме того выполняющей в своем теле его валидацию времени выполнения.

`````ts
function isStringAssert(valid:boolean): asserts valid {
    if(!valid){
        throw new Error(`...`);
    }
}

function action(value: string){
    isStringAssert(typeof value === "string"); // валидация времени выполнения

    // некоторый код...
}
`````

Поскольку лучшие практики тестирования предполагают написание таких тестов которые по своей природе не должны пройти, тестировщик пишущий тесты также на `TypeScript` при попытке протестировать ошибку время выполнения (`assert`) столкнется с проблемой время компиляции, так как компилятор не позволит скомпилировать код выявив несоответствие типов.

`````ts
// файл .ts

function isStringAssert(valid:boolean): asserts valid {
    if(!valid){
        throw new Error(`...`);
    }
}

function action(value: string){
    isStringAssert(typeof value === "string"); // валидация времени выполнения

    // некоторый код...
}

// ...где-то в .ts.spec

/**
 * [error] Argument of type '5' is not assignable to parameter of type 'string'.
 * Компилятор TypeScript не позволяет скомпилировать код имеющий ошибки вызванные
 * несоответствие типов и тем самым препятствует тестированию кода времени выполнения.
 */
action(5);
`````

Чтобы разрешить сложившуюся ситуацию начиная с текущей версии была введена комментарная директива `// @ts-expect-error`.
Новая комментарная директива заставляет компилятор подавлять сообщение об ошибке в случае её возникновения, но при отсутствии необходимости сама становится её причиной.

`````ts
// @ts-expect-error
action(5); // Ok!
// @ts-expect-error
action('5'); // Error! Unused '@ts-expect-error' directive.
`````
