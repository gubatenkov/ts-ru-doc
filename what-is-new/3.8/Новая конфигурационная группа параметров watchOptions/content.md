## Новая конфигурационная группа параметров watchOptions

Оптимально организовать наблюдение за файловой системой дело довольно не простое поскольку ресурсоемкость и энергозатратность сильно зависит как от _api_ платформы, так и от предоставляемых различными библиотеками деклараций. И это не удивительно, ведь ОС по-разному реализуют процесс наблюдения и тем самым затрудняют поддержание актуальности при интенсивном изменении отслеживаемых файлов. И, кроме того, только задумайтесь, сколько пакетов в директории _node_modules_ и каково суммарное количество строк предоставляемых ими деклараций _.d.ts_?

Поэтому перед разработчиками _TypeScript_ всегда остро стояла задача максимально оптимизировать этот процесс. Как следствие в конфигурационном файле _tsconfig.json_ появилась новая группа для конфигурирования `watchOptions` позволяющая выбрать оптимальную стратегию в зависимости от самого проекта.

`````json
// tsconfig.json

{
    "compilerOptions": {},
    // новое поле
    "watchOptions": {

    }
}
`````

Так новая группа реализует четыре параметра - `watchFile`, `watchDirectory`, `fallbackPolling` и `synchronousWatchDirectory`.

`````json
// tsconfig.json

{
    "compilerOptions": {},
    // новое поле
    "watchOptions": {
        "watchFile": "...",
        "watchDirectory": "...",
        "fallbackPolling": "...",
        "synchronousWatchDirectory": "..."
    }
}
`````

- `watchFile`: стратегия наблюдения за отдельными файлами
  - `fixedPollingInterval`: Проверять каждый файл на наличие изменений несколько раз в секунду с фиксированным интервалом.
  - `priorityPollingInterval`: Проверять каждый файл на наличие изменений несколько раз в секунду, но использовать эвристику для проверки файлов определенных типов реже, чем других.
  - `dynamicPriorityPolling`: Использовать динамическую очередь, в которой менее часто изменяемые файлы будут проверяться реже.
  - `useFsEvents` [ПО УМОЛЧАНИЮ]: Пытаться использовать собственные события операционной системы / файловой системы для изменения файлов.
  - `useFsEventsOnParentDirectory`: Пытаться использовать собственные события операционной системы/файловой системы для прослушивания изменений в каталогах, содержащих файл. Это может использовать меньше файловых наблюдателей, но также быть менее точным.
- `watchDirectory`: стратегия наблюдения за целыми деревьями каталогов в системах, в которых отсутствует рекурсивная функция наблюдения за файлами.
  - `fixedPollingInterval`: Проверять каждый каталог на наличие изменений несколько раз в секунду с фиксированным интервалом.
  - `dynamicPriorityPolling`: Использовать динамическую очередь, в которой менее часто изменяемые каталоги будут проверяться реже.
  - `useFsEvents`[ПО УМОЛЧАНИЮ]: Пытаться использовать собственные события операционной системы / файловой системы для изменений каталога.
- `fallbackPolling`: при использовании событий файловой системы этот параметр определяет стратегию опроса, которая используется, когда в системе заканчиваются собственные наблюдатели файлов и / или не поддерживаются собственные средства просмотра файлов.
  - `fixedPollingInterval`: см выше.
  - `priorityPollingInterval`[ПО УМОЛЧАНИЮ]: см выше.
  - `dynamicPriorityPolling`: см выше.
- `synchronousWatchDirectory`: Отключить отложенное наблюдение за каталогами.
  - `true`
  - `false`[ПО УМОЛЧАНИЮ]



